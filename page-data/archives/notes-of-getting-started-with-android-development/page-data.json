{"componentChunkName":"component---src-templates-blog-post-js","path":"/archives/notes-of-getting-started-with-android-development/","result":{"data":{"site":{"siteMetadata":{"title":"Mu Xinqi's Blog"}},"markdownRemark":{"id":"632eaf3a-b6a8-572e-93e8-1200d97e2dc4","excerpt":"《第一行代码》书中 8.4.2 播放视频”的代码在书中的 Nougat 版本运行没有问题，但是在 Pie 中会显示如下图所示   Log 中会显示如下： 查询了一圈发现原因是：书中代码直接操作的是根目录下的 video.mp4 文件，但是在 API level 2…","html":"<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span><span class=\"token class-name\">FileNotFoundException</span><span class=\"token operator\">:</span> <span class=\"token operator\">/</span>storage<span class=\"token operator\">/</span>emulated<span class=\"token operator\">/</span><span class=\"token number\">0</span><span class=\"token operator\">/</span>video<span class=\"token punctuation\">.</span>mp4<span class=\"token operator\">:</span> <span class=\"token keyword\">open</span> <span class=\"token namespace\">failed</span><span class=\"token operator\">:</span> EACCES <span class=\"token punctuation\">(</span><span class=\"token class-name\">Permission</span> denied<span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>《第一行代码》书中 8.4.2 播放视频”的代码在书中的 Nougat 版本运行没有问题，但是在 Pie 中会显示如下图所示 <code class=\"language-text\">Can&#39;t play this video.</code></p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/b30eb/snapshots.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.82278481012659%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'263\\'%20viewBox=\\'0%200%20400%20263\\'%20preserveAspectRatio=\\'none\\'%3e%3cpath%20d=\\'M73%2015c-5%201-8%205-9%209v220c1%205%203%207%208%208%203%202%203%202%201%202-3%200-3%200-2%201h2l1%204v5l1-4%201-4v3l1%204%201-4%201-3v7h9v-9l3-1h8l4%201v9h15v-8c1-2%205-2%2011-2l4%201-1%205v4h17v-5c1-5%202-6%2011-4%205%200%205%200%203%201-3%201-3%201-1%201s2%201%202%204v3h16v-53l-2-53a323%20323%200%2001-2-63l-1-34c0-40%200-42-10-45H73m130%201c-7%203-7%204-8%2042a759%20759%200%2001-1%2068c0%2029-1%2031-2%2031-2%200-2%202-2%2019l1%2016c1-3%201-3%201%202v8l-1%2011%201%2012%201%2015v5l-1%205c0%202%200%202%201%201%200-2%201-2%201-1v2l-1%206v5h17v-10h7c5%200%207%201%207%202l-1%201c-1-1-1%200-1%201l1%201c1-1%201%200%201%202%200%203%200%203%203%203s3%200%203-4l1-3v7h10v-10h8c5%200%207%200%205%201l-1%201c1%200%202%201%201%202l-1%201-1%202c0%202%200%202%202%201h1c0%202%201%202%208%202h8v-10h5c5%200%2012%202%208%202-2%200-2%201-2%204v5l1-4%201-4v7h18v-6c0-5%201-7%203-10l2-3v-34a3079%203079%200%20000-151c0-37%200-39-6-43-4-2-93-3-98%200m14%2028h-6c-6%200-6%200-6%202s1%202%206%202l8%201h2l3-1%202-1h3c0%202%207%201%207-1%200-1-1-2-9-1l-9-1h-1m-16%2010a1388%201388%200%20002%2052l1-5v6c0%205%200%205%201%202l1-2%201%201a166%20166%200%20000-40v-1c-1-1%207-1%2024-1l19%201-7%201h9l9-1c-1-1%202-1%207-1s8%200%207%201v3c1%206%200%2026-1%2031-2%205-3%2011-1%208l2-7%203-5c3-1%205-4%202-4l-1-2%204-1c5%200%206%202%203%204l-2%203-1%203-3%205-2%205c-2%203-3%207-2%207l4-3%206-3c7%200%2010-1%2011-4l2-2c2%200%204-3%203-5%200-1-1-1-2%202-2%202-4%202-8%203-3%200-5%200-4-1%204-1%205-10%202-13V81c2-1%201-4-1-5l-1-3c1-1%200-2-1-3v-2l-1-1c-3-1%200-1%207-1h10V53h-51l-51%201m44%2029v3c1%204%200%206-4%209l-4%202v14h-3l28-1h4v-5c0-10-1-15-3-14l-2-1c-2-2-3-1-3%201l-2%203-3%201-1-2-2%202%201%201%201%202c0%202-2%203-2%200-2-3-3%200-3%206%200%205-1%207-3%205-1-1%202-14%205-17s3-4-1-5l-1-2v-3l-2%201m24%2033l-2%206-33%201-33%201v101h102V123h-17l-17-1%201-2%201-2v-5l-2%203M75%20132l1%2014h42l44-1c2%200%202-2%202-13v-13l-45-1H75v14m236%2029l-1%205%202%2074v23h13V157h-14v4\\'%20fill=\\'%23d3d3d3\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/e10e9/snapshots.webp 158w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/7600a/snapshots.webp 315w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/d869c/snapshots.webp 630w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/38d5d/snapshots.webp 945w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/4eefe/snapshots.webp 1260w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/87d09/snapshots.webp 2898w\"\n          sizes=\"(max-width: 630px) 100vw, 630px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/ff44c/snapshots.jpg 158w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/a6688/snapshots.jpg 315w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/828fb/snapshots.jpg 630w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/0ede0/snapshots.jpg 945w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/3ac88/snapshots.jpg 1260w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/b30eb/snapshots.jpg 2898w\"\n          sizes=\"(max-width: 630px) 100vw, 630px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/ae0dca2d1ec5078ef23588d6e27d5702/828fb/snapshots.jpg\"\n          alt=\"can&#39;t_play_this_video\"\n          title=\"can&#39;t_play_this_video\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Log 中会显示如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token number\">2019</span><span class=\"token operator\">-</span><span class=\"token number\">11</span><span class=\"token operator\">-</span><span class=\"token number\">13</span> <span class=\"token number\">16</span><span class=\"token operator\">:</span><span class=\"token number\">46</span><span class=\"token operator\">:</span><span class=\"token number\">36.273</span> <span class=\"token number\">6238</span><span class=\"token operator\">-</span><span class=\"token number\">6238</span><span class=\"token operator\">/</span>xxx<span class=\"token punctuation\">.</span>xxx<span class=\"token punctuation\">.</span>mainActivity<span class=\"token operator\">/</span><span class=\"token class-name\">VideoView</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Unable</span> <span class=\"token keyword\">to</span> <span class=\"token keyword\">open</span> <span class=\"token namespace\">content</span><span class=\"token operator\">:</span> <span class=\"token operator\">/</span>storage<span class=\"token operator\">/</span>emulated<span class=\"token operator\">/</span><span class=\"token number\">0</span><span class=\"token operator\">/</span>video<span class=\"token punctuation\">.</span>mp4\njava<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span><span class=\"token class-name\">FileNotFoundException</span><span class=\"token operator\">:</span> <span class=\"token operator\">/</span>storage<span class=\"token operator\">/</span>emulated<span class=\"token operator\">/</span><span class=\"token number\">0</span><span class=\"token operator\">/</span>video<span class=\"token punctuation\">.</span>mp4<span class=\"token operator\">:</span> <span class=\"token keyword\">open</span> <span class=\"token namespace\">failed</span><span class=\"token operator\">:</span> EACCES <span class=\"token punctuation\">(</span><span class=\"token class-name\">Permission</span> denied<span class=\"token punctuation\">)</span></code></pre></div>\n<p>查询了一圈发现原因是：书中代码直接操作的是根目录下的 video.mp4 文件，但是在 API level 29 之后，软件默认只有操作其自身目录下的内容的权限，当需要对其他内容进行操作时需要获取权限，特别是当 <code class=\"language-text\">targetSdkVersion</code> >= 29 时，需要将<code class=\"language-text\">requestLegacyExternalStorage</code> 更改为 <code class=\"language-text\">true</code> (default: false)</p>\n<br/>\n<h2>解决方法</h2>\n<p>在 <strong>AndroidManifest.xml</strong> 文件中的 <code class=\"language-text\">&lt;application&gt;</code> 中添加</p>\n<p><code class=\"language-text\">android:requestLegacyExternalStorage=&quot;true&quot;</code></p>","frontmatter":{"title":"Android高版本权限问题","date":"November 13, 2019","description":"📕 Android 开发中遇到的问题"}},"previous":{"fields":{"slug":"/archives/android-high-version-http-request-error-cause/"},"frontmatter":{"title":"Android高版本http请求错误","slug":"android-high-version-http-request-error-cause"}},"next":{"fields":{"slug":"/archives/what-made-me-happy-recently/"},"frontmatter":{"title":"最近的开心事","slug":"what-made-me-happy-recently"}}},"pageContext":{"id":"632eaf3a-b6a8-572e-93e8-1200d97e2dc4","previousPostId":"704130af-9a9f-5254-a3fe-b04bb4ec4180","nextPostId":"beeedcb1-6417-5642-93c3-fcfb375607e8"}},"staticQueryHashes":["2841359383","916993862"]}