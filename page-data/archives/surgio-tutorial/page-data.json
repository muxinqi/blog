{"componentChunkName":"component---src-templates-blog-post-js","path":"/archives/surgio-tutorial/","result":{"data":{"site":{"siteMetadata":{"title":"Mu Xinqi's Blog"}},"markdownRemark":{"id":"c101e5ea-657c-5034-aeca-81f8fa43bfc4","excerpt":"å‰è¨€ æœ‰çš„æ—¶å€™ä¸‹è½½ BitTorrent ä¼šå‘ç°è¢«æ‹¦æˆªï¼ŒæŸ¥çœ‹äº† Clash çš„æ—¥å¿—ä¼šå‘ç°ï¼Œæµé‡æŒ‰ç…§åˆ†æµè§„åˆ™èµ°äº†æœºåœºä»£ç†ï¼Œä½†æ˜¯æœºåœºæ˜¯ç¦æ­¢ BT ä¸‹è½½ çš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨ Clash é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä¸€æ¡ä½¿ BitTorrent ä¸èµ°ä»£ç†ï¼ˆå³ç›´è¿ï¼‰çš„è§„åˆ™ï¼Œä½†æ˜¯ç›®å‰ Clashâ€¦","html":"<h2>å‰è¨€</h2>\n<p>æœ‰çš„æ—¶å€™ä¸‹è½½ BitTorrent ä¼šå‘ç°è¢«æ‹¦æˆªï¼ŒæŸ¥çœ‹äº† Clash çš„æ—¥å¿—ä¼šå‘ç°ï¼Œæµé‡æŒ‰ç…§åˆ†æµè§„åˆ™èµ°äº†æœºåœºä»£ç†ï¼Œä½†æ˜¯æœºåœºæ˜¯ç¦æ­¢ BT ä¸‹è½½ çš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨ Clash é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä¸€æ¡ä½¿ BitTorrent ä¸èµ°ä»£ç†ï¼ˆå³ç›´è¿ï¼‰çš„è§„åˆ™ï¼Œä½†æ˜¯ç›®å‰ Clash çš„é…ç½®æ–‡ä»¶ä¸­<strong>èŠ‚ç‚¹</strong>å’Œ<strong>è§„åˆ™</strong>ä»¥åŠ<strong>é…ç½®</strong>æ˜¯ä¸¥é‡è€¦åˆåœ¨ä¸€èµ·çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ä¸ªå·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œç ”ç©¶äº†ä¸€ä¸‹å‘ç° Surgio å¯ä»¥èƒœä»»ã€‚</p>\n<br/>\n<h2>éœ€æ±‚</h2>\n<p>ç°æœ‰å¤šä¸ªæœºåœºè®¢é˜…ä»¥åŠèŠ‚ç‚¹ä¿¡æ¯ï¼š</p>\n<ul>\n<li>Clash(V2Ray)</li>\n<li>Clash(SSR)</li>\n<li>Vmess</li>\n</ul>\n<p>æƒ³å°†å…¶åˆå¹¶æˆä¸€ä¸ª Clash é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”è‡ªå®šä¹‰ä¸€äº›åˆ†æµè§„åˆ™ã€‚</p>\n<br/>\n<h2>Surgio</h2>\n<p><a href=\"https://surgio.js.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Surgio</a> å°±æ˜¯ä¸€ä¸ªå¯ä»¥å®ç°ï¼ˆåŒ…æ‹¬ä½†ä¸ä»…é™äºï¼‰ä¸Šè¿°éœ€æ±‚çš„å¥½å¸®æ‰‹ã€‚</p>\n<p>å…³äº Surgio çš„è¯¦ç»†ä»‹ç»ï¼Œè¿˜è¯·çœ‹ <a href=\"https://surgio.js.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Surgioå®˜æ–¹æ–‡æ¡£</a> ï¼Œæ–‡æ¡£å†™çš„è¾ƒä¸ºå…¨é¢ï¼Œå¯¹äºæˆ‘è¿™æ ·çš„å°ç™½æ¥è¯´ï¼Œåˆæ¬¡ä¸Šæ‰‹ç¡®å®æœ‰äº›æ‘¸ä¸ç€å¤´è„‘ï¼Œç½‘ä¸Šç›¸å…³çš„æ•™ç¨‹ä¹Ÿè¾ƒå°‘ï¼ˆå¯èƒ½å¤§ä½¬çœ‹ä¸€çœ‹å°±æ˜ç™½äº†å§ï¼Œè§‰å¾—æ²¡å•¥å¯ä»¥åˆ†äº«çš„ï¼‰ã€‚</p>\n<p>å°±è¿™æ ·ï¼Œååå¤å¤ç ”ç©¶äº†å°ä¸¤å¤©ï¼Œæ•´ç†å‡ºäº†ä»¥ä¸‹å†…å®¹ï¼Œæ¥è§£å†³ä¸Šè¿°éœ€æ±‚ã€‚</p>\n<br/>\n<h2>Surgio ç¯å¢ƒé…ç½®</h2>\n<blockquote>\n<ul>\n<li>ä»¥ â€™$â€™ å¼€å¤´çš„å†…å®¹æ˜¯éœ€è¦è¾“å…¥è‡³ç»ˆç«¯çš„ï¼Œæœ¬æ•™ç¨‹åŸºäº macOS Catalina ç¯å¢ƒï¼Œå…¶ä»–å¹³å°è¯·å‚ç…§ <a href=\"https://surgio.js.org/guide/getting-started.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Surgio å¿«é€Ÿä¸Šæ‰‹</a></li>\n</ul>\n</blockquote>\n<br/>\n<h3>å®‰è£… Node.js</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ brew <span class=\"token function\">install</span> node</code></pre></div>\n<p>è‹¥æç¤º <code class=\"language-text\">Command not found &#39;brew&#39;</code>ï¼Œè¯·å®‰è£… <code class=\"language-text\">Homebrew</code>åå†æ¬¡æ‰§è¡Œè¯¥å‘½ä»¤å®‰è£… <code class=\"language-text\">Node.js</code>ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># å®‰è£… Homebrew</span>\n$ /bin/bash -c <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class=\"token variable\">)</span></span>\"</span></code></pre></div>\n<br/>\n<h3>ä¸‹è½½ ssr-local äºŒè¿›åˆ¶æ–‡ä»¶</h3>\n<p>Surgio å¯¼å‡º SSR é…ç½®æ—¶<a href=\"https://surgio.js.org/guide/install-ssr-local.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">éœ€è¦ ssr-local çš„æ”¯æŒ</a>ï¼Œå¦åˆ™åé¢æ‰§è¡Œå‘½ä»¤æ—¶ä¼šæŠ¥é”™ã€‚\nï¼ˆåæœŸå¯ä»¥é€šè¿‡é…ç½® <code class=\"language-text\">binPath</code> æˆ–è€…åˆ é™¤å†—ä½™çš„ SSR å¯¼å‡ºé…ç½®ç­‰å†…å®¹æ¥ä¼˜åŒ–ï¼‰</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯ä¸‹è½½ ssr-local åˆ°æŒ‡å®šä½ç½®ï¼Œå¹¶ä¸ºå…¶æ·»åŠ æ‰§è¡Œæƒé™ã€‚</span>\n$ <span class=\"token function\">curl</span> -L https://github.com/tindy2013/shadowsocks-static-binaries/raw/master/shadowsocksr-libev/macos/ssr-local -o /usr/local/bin/ssr-local <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">chmod</span> +x /usr/local/bin/ssr-local</code></pre></div>\n<br/>\n<h3>å®‰è£… Surgio</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># å®‰è£…</span>\n$ <span class=\"token function\">npm</span> init surgio-store my-rule-store\n\n<span class=\"token comment\"># æˆ–ä½¿ç”¨å›½å†…é•œåƒå®‰è£…</span>\n$ <span class=\"token function\">npm</span> init surgio-store my-rule-store --use-cnpm\n\n<span class=\"token comment\"># åˆ‡æ¢åˆ°ä»“åº“ç›®å½•</span>\n$ <span class=\"token builtin class-name\">cd</span> my-rule-store</code></pre></div>\n<p><code class=\"language-text\">my-rule-store</code> ç›®å½•å¦‚ä¸‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">.</span>\nâ”œâ”€â”€ node_modules\nâ”œâ”€â”€ package-lock.json\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ provider\nâ”œâ”€â”€ surgio.conf.js\nâ””â”€â”€ template</code></pre></div>\n<p>å½“å‰ä½ åªéœ€è¦å…³æ³¨ä¸‰ä¸ªä¸œè¥¿ï¼Œä»–ä»¬çš„ä½œç”¨å¤§è‡´å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<ol>\n<li><code class=\"language-text\">provider</code> - é‡Œé¢åŒ…å«ä½ çš„æœºåœºè®¢é˜…å’ŒèŠ‚ç‚¹ä¿¡æ¯</li>\n<li><code class=\"language-text\">template</code> - é‡Œé¢åŒ…å«è¾“å‡ºæ–‡ä»¶çš„æ ¼å¼ä¸é…ç½®</li>\n<li><code class=\"language-text\">surgio.conf.js</code> - é‡Œé¢æ˜¯ä½ æ‰€éœ€è¦çš„è§„åˆ™å’Œæœºåœºè®¢é˜…çš„ç»„åˆæ–¹å¼ç­‰ç­‰é…ç½®</li>\n</ol>\n</blockquote>\n<br/>\n<h2>æ·»åŠ æœºåœºè®¢é˜…å’ŒèŠ‚ç‚¹ä¿¡æ¯</h2>\n<p>ç¬¬ä¸€æ­¥ï¼Œå…ˆå°†å¤šä¸ªæœºåœºè®¢é˜…å’Œä¸€äº›å•ç‹¬çš„èŠ‚ç‚¹æ·»åŠ åˆ° Surgio ä¸­ã€‚</p>\n<br/>\n<h3>æ·»åŠ æœºåœºè®¢é˜…</h3>\n<p>è¿›å…¥ provider æ–‡ä»¶å¤¹</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> provider</code></pre></div>\n<p>ä½ èƒ½çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">.</span>\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ demo.js\nâ”œâ”€â”€ ssr_subscribe_demo.js\nâ”œâ”€â”€ subscribe_demo.js\nâ””â”€â”€ v2ray_subscribe_demo.js</code></pre></div>\n<p>é¦–å…ˆå¯¹ <code class=\"language-text\">subscribe_demo.js</code> è¿›è¡Œä¿®æ”¹ï¼Œå°† <code class=\"language-text\">url</code> ä¸­çš„å†…å®¹æ›¿æ¢æˆä½ çš„æœºåœºè®¢é˜…ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">module.exports = {\n<span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span> url: 'https://gist.githubusercontent.com/geekdada/34353d6ae23abd48f6e200b00747a87e/raw',\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span> url: 'https://example.com/clash_v2.yaml',\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> type: 'clash',\n<span class=\"token prefix unchanged\"> </span> // å®šä¹‰æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ”¯æŒ udpRelay\n<span class=\"token prefix unchanged\"> </span> udpRelay: true,\n<span class=\"token prefix unchanged\"> </span> // æ·»åŠ å›½æ—— emoji\n<span class=\"token prefix unchanged\"> </span> addFlag: true,\n</span>};</code></pre></div>\n<p>å¦‚æœä½ æœ‰å¤šä¸ªæœºåœºè®¢é˜…çš„è¯ï¼Œåˆ™æ ¹æ® <code class=\"language-text\">subscribe_demo.js</code> æ ¼å¼åœ¨å½“å‰ç›®å½•ä¸‹å¤šåˆ›å»ºå‡ ä¸ªæ–‡ä»¶ï¼Œä»¥æˆ‘ä¸Šé¢ï¼ˆä¸¤ä¸ª Clash è®¢é˜…é“¾æ¥ï¼‰çš„éœ€æ±‚ä¸ºä¾‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># æ‹·è´å‡ºä¸€ä»½æ–°çš„æ–‡ä»¶</span>\n$ <span class=\"token function\">cp</span> subscribe_demo.js subscribe_demo_1.js</code></pre></div>\n<p>å¯¹ <code class=\"language-text\">subscribe_demo_1.js</code> çš„å†…å®¹è¿›è¡Œä¿®æ”¹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">module.exports = {\n<span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span> url: 'https://example.com/clash_v2.yaml',\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span> url: 'https://example.com/clash_ssr.yaml',\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> type: 'clash',\n<span class=\"token prefix unchanged\"> </span> // å®šä¹‰æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ”¯æŒ udpRelay\n<span class=\"token prefix unchanged\"> </span> udpRelay: true,\n<span class=\"token prefix unchanged\"> </span> // æ·»åŠ å›½æ—— emoji\n<span class=\"token prefix unchanged\"> </span> addFlag: true,\n</span>};</code></pre></div>\n<p>è¿™æ · <code class=\"language-text\">subscribe_demo.js</code> å’Œ <code class=\"language-text\">subscribe_demo_1.js</code> ä¸­å°±åˆ†åˆ«ä¿å­˜äº† Clash(V2Ray)å’Œ Clash(SSR) çš„è®¢é˜…åœ°å€ã€‚</p>\n<br/>\n<h3>æ·»åŠ èŠ‚ç‚¹ä¿¡æ¯</h3>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ <code class=\"language-text\">demo.js</code> ä¸­å¯ä»¥çœ‹åˆ°ä¸€äº›èŠ‚ç‚¹ä¿¡æ¯å¡«å†™çš„æ¨¡æ¿ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  type<span class=\"token operator\">:</span> <span class=\"token string\">'custom'</span><span class=\"token punctuation\">,</span>\n  nodeList<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      nodeName<span class=\"token operator\">:</span> <span class=\"token string\">'ğŸ‡ºğŸ‡¸US'</span><span class=\"token punctuation\">,</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">'shadowsocks'</span><span class=\"token punctuation\">,</span>\n      hostname<span class=\"token operator\">:</span> <span class=\"token string\">'us.example.com'</span><span class=\"token punctuation\">,</span>\n      port<span class=\"token operator\">:</span> <span class=\"token string\">'10000'</span><span class=\"token punctuation\">,</span>\n      method<span class=\"token operator\">:</span> <span class=\"token string\">'chacha20-ietf-poly1305'</span><span class=\"token punctuation\">,</span>\n      password<span class=\"token operator\">:</span> <span class=\"token string\">'password'</span><span class=\"token punctuation\">,</span>\n      obfs<span class=\"token operator\">:</span> <span class=\"token string\">'tls'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'obfs-host'</span><span class=\"token operator\">:</span> <span class=\"token string\">'gateway-carry.icloud.com'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'udp-relay'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      nodeName<span class=\"token operator\">:</span> <span class=\"token string\">'ğŸ‡­ğŸ‡°HK(Netflix)'</span><span class=\"token punctuation\">,</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">'shadowsocks'</span><span class=\"token punctuation\">,</span>\n      hostname<span class=\"token operator\">:</span> <span class=\"token string\">'hk.example.com'</span><span class=\"token punctuation\">,</span>\n      port<span class=\"token operator\">:</span> <span class=\"token string\">'10000'</span><span class=\"token punctuation\">,</span>\n      method<span class=\"token operator\">:</span> <span class=\"token string\">'chacha20-ietf-poly1305'</span><span class=\"token punctuation\">,</span>\n      password<span class=\"token operator\">:</span> <span class=\"token string\">'password'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'udp-relay'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>åªéœ€ç¨ä½œä¿®æ”¹å³å¯ï¼Œç»“æ„å¯å‚è€ƒ <a href=\"https://surgio.js.org/guide/custom-provider.html#custom\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">å®˜æ–¹æ–‡æ¡£ï¼šProvider - custom</a> ã€‚</p>\n<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å°†å¤šä¸ªæœºåœºçš„è®¢é˜…ä¿¡æ¯å’Œä¸€äº›èŠ‚ç‚¹çš„ä¿¡æ¯å°±æ·»åŠ åˆ°äº† <code class=\"language-text\">Surgio</code> çš„é…ç½®ä¸­ã€‚</p>\n<p>æ¥ä¸‹æ¥æ·»åŠ ä¸€äº›æˆ‘ä»¬æ‰€éœ€è¦çš„åˆ†æµè§„åˆ™ã€‚</p>\n<br/>\n<h2>é…ç½®åˆ†æµè§„åˆ™</h2>\n<p>åœ¨ <a href=\"https://surgio.js.org/guide/custom-config.html#remotesnippets\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">å®˜æ–¹æ–‡æ¡£</a> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£åˆ° <code class=\"language-text\">Surgio</code> æ”¯æŒç¬¦åˆ <a href=\"https://nssurge.zendesk.com/hc/zh-cn/articles/360010038714-Surge-Mac-3-Release-Note\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Surge Ruleset æ ‡å‡†</a>ï¼Œæˆ‘ä»¬å°±ä»¥æ·»åŠ  <a href=\"https://github.com/Loyalsoldier/surge-rules\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">surge-rules</a> ä¸­çš„ <strong>RULE-SET: å¹¿å‘ŠåŸŸååˆ—è¡¨ reject.txt</strong> è§„åˆ™ä¸ºä¾‹ï¼Œåœ¨ç”Ÿæˆçš„ Clash æ–‡ä»¶ä¸­æ‹¦æˆªè¯¥è§„åˆ™ä¸‹çš„åŸŸåã€‚</p>\n<br/>\n<h3>æ·»åŠ è§„åˆ™</h3>\n<p>å¯¹ <code class=\"language-text\">my-rule-store</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code class=\"language-text\">surgio.conf.js</code> è¿›è¡Œä¿®æ”¹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">module.exports = {\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> remoteSnippets: [\n<span class=\"token prefix unchanged\"> </span>   {\n<span class=\"token prefix unchanged\"> </span>     name: 'apple', // æ¨¡æ¿ä¸­å¯¹åº” remoteSnippets.apple\n<span class=\"token prefix unchanged\"> </span>     url: 'https://raw.githubusercontent.com/geekdada/surge-list/master/surgio-snippet/apple.tpl',\n<span class=\"token prefix unchanged\"> </span>     surgioSnippet: true\n<span class=\"token prefix unchanged\"> </span>   },\n</span>\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>   // çœç•¥ä¸€äº›è§„åˆ™\n</span>\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>   {\n<span class=\"token prefix unchanged\"> </span>     name: 'paypal', // æ¨¡æ¿ä¸­å¯¹åº” remoteSnippets.paypal\n<span class=\"token prefix unchanged\"> </span>     url: 'https://github.com/DivineEngine/Profiles/raw/master/Surge/Ruleset/Extra/PayPal.list'\n<span class=\"token prefix unchanged\"> </span>   },\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>   // æ·»åŠ å¹¿å‘ŠåŸŸååˆ—è¡¨è§„åˆ™\n<span class=\"token prefix inserted\">+</span>   {\n<span class=\"token prefix inserted\">+</span>     name: 'ad-reject',\n<span class=\"token prefix inserted\">+</span>     url: 'https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/ruleset/reject.txt'\n<span class=\"token prefix inserted\">+</span>   },\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> ]\n</span>}</code></pre></div>\n<p>å¥½ï¼Œåˆ°æ­¤ Surgio å·²ç»çŸ¥é“äº†è¯¥å»å“ªé‡Œè·å–è§„åˆ™ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦è®© Surgio çŸ¥é“è¿™äº›è§„åˆ™è¯¥åº”ç”¨åœ¨å“ªé‡Œã€‚</p>\n<br/>\n<h3>æ¨¡æ¿ä¸­åº”ç”¨è§„åˆ™</h3>\n<p>è¿›å…¥ <code class=\"language-text\">template</code> æ–‡ä»¶å¤¹ï¼Œå¯¹å…¶ä¸­çš„ <code class=\"language-text\">clash.tpl</code> æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">rules:\n<span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span> {{ remoteSnippets.ad-reject.main('REJECT') | clash }}\n</span>{{ remoteSnippets.apple.main('ğŸš€ Proxy', 'ğŸ Apple', 'ğŸ Apple CDN', 'DIRECT', 'US') | clash }}\n{{ remoteSnippets.netflix.main('ğŸ¬ Netflix') | clash }}\n{{ remoteSnippets.hbo.main('ğŸš€ Proxy') | clash }}\n{{ remoteSnippets.hulu.main('ğŸš€ Proxy') | clash }}\n{{ youtube_rules.main('ğŸš€ Proxy') | clash }}\n{{ us_rules.main('US') | clash }}\n{{ remoteSnippets.telegram.main('ğŸš€ Proxy') | clash }}\n{{ blocked_rules.main('ğŸš€ Proxy') | clash }}\n{{ direct_rules.main('DIRECT') | clash }}</code></pre></div>\n<p>åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ çš„å†…å®¹ä»£è¡¨ï¼Œä» <code class=\"language-text\">surgio.conf.js</code> æ–‡ä»¶ä¸­çš„ <code class=\"language-text\">remoteSnippets</code> ä¸­æ‰¾åˆ°åå­—ä¸º <code class=\"language-text\">ad-reject</code> çš„è§„åˆ™ï¼Œå°†è¯¥è§„åˆ™è®¾ç½®ä¸º <strong>æ‹’ç»</strong>(<code class=\"language-text\">REJECT</code>) çŠ¶æ€ï¼Œè¿™æ ·ç¬¦åˆè¯¥è§„åˆ™çš„è¯·æ±‚å°±ä¼šè¢«æ‹¦æˆªï¼Œä»è€Œè¾¾åˆ°å»é™¤å¹¿å‘Šçš„æ•ˆæœã€‚</p>\n<p>æœ€å¼€å§‹çš„éœ€æ±‚åŸºæœ¬é…ç½®å®Œæ¯•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å°†å¤šä¸ªæœºåœºè®¢é˜…å’Œä¸€äº›å•ç‹¬çš„èŠ‚ç‚¹åˆå¹¶ç”Ÿæˆä¸€ä¸ª Clash é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”å…¶ä¸­éœ€è¦åŒ…å«åˆšåˆšé…ç½®çš„è§„åˆ™ã€‚</p>\n<br/>\n<h2>å¯¼å‡ºé…ç½®</h2>\n<p>è¿™ä¸€éƒ¨åˆ†éœ€è¦å›åˆ° <code class=\"language-text\">surgio.conf.js</code> ä¸­è¿›è¡Œä¿®æ”¹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">artifacts: [\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>   // çœç•¥ä¸€äº›å†…å®¹\n</span>\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>   /**\n<span class=\"token prefix unchanged\"> </span>    * Clash\n<span class=\"token prefix unchanged\"> </span>    */\n<span class=\"token prefix unchanged\"> </span>   { \n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>     // è¯¥å¯¼å‡ºæ–‡ä»¶åŒ…å« Clash(V2Ray)\n</span><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span>     name: 'Clash.yaml',\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>     name: 'clash_v2.yaml',\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>     template: 'clash',\n<span class=\"token prefix unchanged\"> </span>     provider: 'subscribe_demo',   // å¯¹åº” provider ä¸­çš„ subscribe_demo.js\n<span class=\"token prefix unchanged\"> </span>   },\n<span class=\"token prefix unchanged\"> </span>   { \n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>     // è¯¥å¯¼å‡ºæ–‡ä»¶åŒ…å« Clash(SSR)\n</span><span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span>     name: 'Clash_custom_dns.yaml',\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>     name: 'clash_ssr.yaml',\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>     template: 'clash',\n<span class=\"token prefix unchanged\"> </span>     provider: 'subscribe_demo_1', // å¯¹åº” provider ä¸­çš„ subscribe_demo_1.js\n<span class=\"token prefix unchanged\"> </span>     customParams: {\n<span class=\"token prefix unchanged\"> </span>       dns: true,\n<span class=\"token prefix unchanged\"> </span>     }\n<span class=\"token prefix unchanged\"> </span>   },\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>   // åˆå¹¶èŠ‚ç‚¹\n<span class=\"token prefix inserted\">+</span>   { \n<span class=\"token prefix inserted\">+</span>     // è¯¥å¯¼å‡ºæ–‡ä»¶åŒ…å« Vmess + Clash(V2Ray) + Clash(SSR)\n<span class=\"token prefix inserted\">+</span>     name: 'clash_combine.yaml',\n<span class=\"token prefix inserted\">+</span>     template: 'clash',\n<span class=\"token prefix inserted\">+</span>     provider: 'demo',             // å¯¹åº” provider ä¸­çš„ demo.js\n<span class=\"token prefix inserted\">+</span>     combineProviders: ['subscribe_demo', 'subscribe_demo_1'],\n<span class=\"token prefix inserted\">+</span>   },\n</span>\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>   // çœç•¥ä¸€äº›å†…å®¹\n<span class=\"token prefix unchanged\"> </span> ],</span></code></pre></div>\n<br/>\n<h2>è¾“å‡ºä»£ç†é…ç½®æ–‡ä»¶</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># åˆ‡æ¢åˆ°é¡¹ç›®æ ¹ç›®å½•</span>\n$ <span class=\"token builtin class-name\">cd</span> my-rule-store\n\n<span class=\"token comment\"># ç”Ÿæˆé…ç½®æ–‡ä»¶</span>\n$ npx surgio generate</code></pre></div>\n<p>æ‰§è¡ŒæˆåŠŸåï¼Œä¼šç”Ÿæˆä¸€ä¸ª <code class=\"language-text\">dist</code> æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åº”è¯¥åŒ…å«ï¼š</p>\n<ul>\n<li>clash_v2.yaml</li>\n<li>clash_ssr.yaml</li>\n<li>clash_combine.yaml</li>\n</ul>\n<p>å°† <code class=\"language-text\">clash_combine.yaml</code> è¿™ä¸ªåˆå¹¶ä¹‹åçš„ Clash é…ç½®æ–‡ä»¶æ‹·è´è‡³ ClashX çš„é…ç½®ç›®å½•å†…ï¼Œç„¶ååœ¨ ClashX ä¸­åˆ‡æ¢é…ç½®å³å¯ã€‚</p>\n<br/>\n<p>æŒ‰ç…§ä¸Šé¢çš„é…ç½®ï¼Œå¯ä»¥å®ç°æœ¬æ–‡ä¸€å¼€å§‹çš„éœ€æ±‚ã€‚</p>\n<p>ä½†æ˜¯è¿˜æ˜¯æœ‰ä»¥ä¸‹å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼š</p>\n<ul>\n<li>æ¯æ¬¡ä¿®æ”¹è§„åˆ™é…ç½®åï¼Œéœ€è¦é‡æ–°æ‹·è´é…ç½®æ–‡ä»¶è‡³ ClashX é…ç½®ç›®å½•ä¸‹ã€‚</li>\n<li>æœºåœºæ›´æ–°èŠ‚ç‚¹è®¢é˜…åï¼Œéœ€è¦é‡æ–°ç”Ÿæˆé…ç½®æ–‡ä»¶ã€‚</li>\n<li>é…ç½®æ–°æœºå™¨çš„ä»£ç†æ—¶ï¼Œéœ€è¦å…ˆåœ¨æœ¬åœ°é…ç½® Node å’Œ Surgio ç¯å¢ƒã€‚</li>\n</ul>\n<p>å‚è€ƒäº†å®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°å¯ä»¥å°† Surgio éƒ¨ç½²åˆ° SaaS å¹³å°ä¸Šï¼Œä¾‹å¦‚ Vercel å’Œ Herokuã€‚</p>\n<p>é‚£ä¹ˆå°±å¼€å§‹å§~</p>\n<br/>\n<h2>éƒ¨ç½² Surgio API</h2>\n<p>æœ¬åœ°ç›´æ¥éƒ¨ç½²è‡³ Vercel çš„æ–¹æ³•è¯·å‚è€ƒ <a href=\"https://surgio.js.org/guide/advance/api-gateway.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">å®˜æ–¹æ–‡æ¡£ï¼šå¿«é€Ÿæ­å»ºæ‰˜ç®¡ API</a> ã€‚</p>\n<p>ä»¥ä¸‹ä»‹ç»çš„æ–¹æ³•æ˜¯æˆ‘å¸¸ç”¨çš„æµç¨‹ï¼Œå°†æœ¬åœ°é¡¹ç›®æäº¤è‡³ GitHubï¼Œç„¶ååœ¨ Vercel å¼•å¦‚ GitHub é¡¹ç›®å¹¶è¿›è¡Œéƒ¨ç½²çš„æ–¹æ³•ï¼Œä¸è¿‡ä¼šç•¥è¿‡ä¸€äº›å¸¸ç”¨æ“ä½œã€‚</p>\n<p>è¯¥æµç¨‹æ–¹ä¾¿åæœŸéšæ—¶éšåœ°åœ¨ GitHub ä¸Šç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸” Vercel è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œæ— éœ€æœ¬åœ°å†æ¬¡é…ç½®ç¯å¢ƒã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># åœ¨é¡¹ç›®æ ¹ç›®å½• `my-rule-store` ä¸‹å®‰è£… `Surgio Gateway`ã€‚</span>\n$ <span class=\"token builtin class-name\">cd</span> my-rule-store\n$ <span class=\"token function\">npm</span> i @surgio/gateway --save\n\n<span class=\"token comment\"># åˆ›å»º Vercel é…ç½®æ–‡ä»¶</span>\n$ <span class=\"token function\">touch</span> vercel.json\n\n<span class=\"token comment\"># åˆ›å»º Surgio Gateway é…ç½®æ–‡ä»¶</span>\n$ <span class=\"token function\">touch</span> gateway.js</code></pre></div>\n<p>åœ¨ <code class=\"language-text\">vercel.json</code> æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"public\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"builds\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> \n      <span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/gateway.js\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"use\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"@vercel/node\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"includeFiles\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token string\">\"provider/**\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"template/**\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"*.js\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"*.json\"</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"routes\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/(.*)\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"dest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/gateway.js\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>åœ¨ <code class=\"language-text\">gateway.js</code> æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> gateway <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@surgio/gateway'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> gateway<span class=\"token punctuation\">.</span><span class=\"token function\">createHttpServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3>é…ç½®æ¥å£é‰´æƒï¼ˆå®‰å…¨è€ƒè™‘ï¼ŒåŠ¡å¿…é…ç½®ï¼‰</h3>\n<p>åœ¨ <code class=\"language-text\">surgio.conf.js</code> æ·»åŠ å¦‚ä¸‹å†…å®¹</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">module.exports = {\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> gateway: {\n<span class=\"token prefix unchanged\"> </span>   auth: true,\n<span class=\"token prefix unchanged\"> </span>   accessToken: 'YOUR_PASSWORD',\n<span class=\"token prefix unchanged\"> </span> },\n</span>}</code></pre></div>\n<p>å¹¶å°† <code class=\"language-text\">YOUR_PASSWORD</code> è¿›è¡Œéšæ„æ›¿æ¢ã€‚</p>\n<br/>\n<h3>æäº¤è‡³ GitHub</h3>\n<p>ç•¥</p>\n<br/>\n<h3>Vercel éƒ¨ç½²</h3>\n<p>ç•¥</p>\n<hr>\n<p>ç•¥ç•¥ç•¥:p</p>","frontmatter":{"title":"Surgioä¸Šæ‰‹æ•™ç¨‹â€”â€”å¦¥å–„ç®¡ç†ä½ çš„æœºåœºè®¢é˜…","date":"February 06, 2021","description":"æœ‰å¤šä¸ªæœºåœºè®¢é˜…æƒ³åˆå¹¶æˆä¸€ä¸ªï¼Ÿæä¾›çš„åˆ†æµè§„åˆ™è‡ªå·±ä¸æ»¡æ„ï¼Ÿè¿™é‡Œæˆ–è®¸å¯ä»¥å¸®åˆ°ä½ ~"}},"previous":null,"next":{"fields":{"slug":"/archives/getting-started-with-fitness/"},"frontmatter":{"title":"åœ¨ç–«æƒ…æœŸé—´æˆ‘åšæŒä¸‹æ¥çš„äº‹","slug":"getting-started-with-fitness"}}},"pageContext":{"id":"c101e5ea-657c-5034-aeca-81f8fa43bfc4","previousPostId":null,"nextPostId":"732ca6ad-b9f8-511a-a041-53c25c670234"}},"staticQueryHashes":["2841359383","916993862"]}