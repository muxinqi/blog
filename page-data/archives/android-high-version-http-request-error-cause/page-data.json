{"componentChunkName":"component---src-templates-blog-post-js","path":"/archives/android-high-version-http-request-error-cause/","result":{"data":{"site":{"siteMetadata":{"title":"Mu Xinqi's Blog"}},"markdownRemark":{"id":"704130af-9a9f-5254-a3fe-b04bb4ec4180","excerpt":"åœ¨ Android 7(API 24)ä¸Šæ­£å¸¸ï¼Œä½†åœ¨ Android 10(API 29) ä¸Š Volley è¯·æ±‚ http å¤±è´¥ï¼Œæ‰€ä»¥ä¸æ˜¾ç¤ºå†…å®¹ã€‚ æŸ¥è¯¢åˆ° Android Pie è¡Œä¸ºå˜æ›´ä¸­æåˆ°ï¼š ä¼ è¾“å±‚å®‰å…¨åè®® (TLS) å®ç°å˜æ›´ ç³»ç»Ÿçš„ä¼ è¾“å±‚å®‰å…¨åè®® (TLS) å®ç°åœ¨ Androidâ€¦","html":"<p>åœ¨ Android 7(API 24)ä¸Šæ­£å¸¸ï¼Œä½†åœ¨ Android 10(API 29) ä¸Š Volley è¯·æ±‚ http å¤±è´¥ï¼Œæ‰€ä»¥ä¸æ˜¾ç¤ºå†…å®¹ã€‚</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/9ae6c/before-fix.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 62.65822784810127%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/svg+xml,%3csvg%20xmlns=\\&apos;http://www.w3.org/2000/svg\\&apos;%20width=\\&apos;400\\&apos;%20height=\\&apos;251\\&apos;%20viewBox=\\&apos;0%200%20400%20251\\&apos;%20preserveAspectRatio=\\&apos;none\\&apos;%3e%3cpath%20d=\\&apos;M230%2011c-6%204-6%202-6%2074v65h-17l-17%201-7%201h-7l6-1%207-1h-7l-7%201h-1l-2-66c0-71%200-70-7-73-5-3-93-3-97%200-7%204-6%200-7%2075%200%2060-1%2071-2%2060-1-2-1-1-1%202%200%206%200%207-3%206l-1-4c0-3-1-4-2-4-2-1-2-1-2%204l-1%204-1-2v-3H28l-20-1-4-1H0v103h401v-42l-1-62v-19h-4l-4%201-14%202-16%201c-2%200-3%200-3-2-1-2-1-2-1%202v5l-1-4c-1-4-1-4-1-1l-2%204-1%206%201%207h-18v-6a37988%2037988%200%2001-2-122c-3-13%200-12-55-12-44%200-46%200-49%202m-1%20121v84h101V47H229v85M66%2049v85l1%2083h100V48h-50l-51%201M0%20200\\&apos;%20fill=\\&apos;%23d3d3d3\\&apos;%20fill-rule=\\&apos;evenodd\\&apos;/%3e%3c/svg%3e&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/e10e9/before-fix.webp 158w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/7600a/before-fix.webp 315w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/d869c/before-fix.webp 630w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/38d5d/before-fix.webp 945w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/4eefe/before-fix.webp 1260w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/a0280/before-fix.webp 2934w\" sizes=\"(max-width: 630px) 100vw, 630px\" type=\"image/webp\">\n        <source srcset=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/ff44c/before-fix.jpg 158w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/a6688/before-fix.jpg 315w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/828fb/before-fix.jpg 630w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/0ede0/before-fix.jpg 945w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/3ac88/before-fix.jpg 1260w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/9ae6c/before-fix.jpg 2934w\" sizes=\"(max-width: 630px) 100vw, 630px\" type=\"image/jpeg\">\n        <img class=\"gatsby-resp-image-image\" src=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/27c7eb9d6fd047b1d4b80829a18a296d/828fb/before-fix.jpg\" alt=\"request_http_failed_in_high_version\" title=\"request_http_failed_in_high_version\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n  </a>\n    </span>\n<p>æŸ¥è¯¢åˆ° <a href=\"https://developer.android.com/about/versions/pie/android-9.0-changes-all?hl=zh-cn\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Android Pie è¡Œä¸ºå˜æ›´</a>ä¸­æåˆ°ï¼š</p>\n<blockquote>\n<p><strong>ä¼ è¾“å±‚å®‰å…¨åè®® (TLS) å®ç°å˜æ›´</strong></p>\n<p>ç³»ç»Ÿçš„ä¼ è¾“å±‚å®‰å…¨åè®® (TLS) å®ç°åœ¨ Android 9 ä¸­ç»å†äº†è‹¥å¹²æ¬¡å˜æ›´ï¼š</p>\n<ul>\n<li>å¦‚æœ <a href=\"https://developer.android.com/reference/javax/net/ssl/SSLSocket.html?hl=zh-cn\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">SSLSocket</a> çš„å®ä¾‹åœ¨åˆ›å»ºæ—¶è¿æ¥å¤±è´¥ï¼Œç³»ç»Ÿä¼šå¼•å‘ <a href=\"https://developer.android.com/reference/java/io/IOException.html?hl=zh-cn\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">IOException</a> è€Œé <a href=\"https://developer.android.com/reference/java/lang/NullPointerException.html?hl=zh-cn\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">NullPointerException</a>ã€‚</li>\n<li><a href=\"https://developer.android.com/reference/javax/net/ssl/SSLEngine.html?hl=zh-cn\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">SSLEngine</a> ç±»å¯æ­£å¸¸å¤„ç†å‡ºç°çš„ä»»ä½• <code class=\"language-text\">close_notify</code> æé†’ã€‚</li>\n</ul>\n<p>å¦‚éœ€äº†è§£æœ‰å…³åœ¨ Android åº”ç”¨ä¸­è¿›è¡Œå®‰å…¨ç½‘ç»œè¯·æ±‚çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href=\"https://developer.android.com/training/articles/security-ssl?hl=zh-cn#HttpsExample\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ä¸€ä¸ª HTTPS ç¤ºä¾‹</a> ã€‚</p>\n</blockquote>\n<br/>\n<h2>è§£å†³æ–¹æ³•</h2>\n<ol>\n<li>æ”¹ç”¨ https è¯·æ±‚ ï¼ˆæ¨èï¼‰</li>\n<li><code class=\"language-text\">targetSdkVersion</code> æ”¹ä¸º <code class=\"language-text\">27</code> ä»¥ä¸‹</li>\n<li>\n<p>åœ¨ <code class=\"language-text\">AnroidManifest.xml</code> ä¸­çš„ <code class=\"language-text\">&lt;application&gt;</code> æ ‡ç­¾ä¸­æ·»åŠ </p>\n<p> <code class=\"language-text\">android:usesCleartextTraffic=â€œtrueâ€</code></p>\n</li>\n<li>\n<p>åœ¨ <code class=\"language-text\">res/xml</code> ç›®å½•ä¸‹åˆ›å»º <code class=\"language-text\">network_security_config.xml</code> æ–‡ä»¶ï¼Œ</p>\n<p>ç„¶ååœ¨ <code class=\"language-text\">AndroidManifest.xml</code> ä¸­çš„ <code class=\"language-text\">&lt;application&gt;</code> æ ‡ç­¾ä¸­æ·»åŠ </p>\n<p><code class=\"language-text\">android:networkSecurityConfig=&quot;@xml/network_security_config&quot;</code>ã€‚</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!--network_security_config.xml--></span>\n\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>network-security-config</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!--é»˜è®¤é…ç½®ï¼Œæ˜æ–‡é€šä¿¡ï¼Œä½¿ç”¨ç³»ç»Ÿè¯ä¹¦--></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>base-config</span> <span class=\"token attr-name\">cleartextTrafficPermitted</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>trust-anchors</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>certificates</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>system<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>trust-anchors</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>base-config</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>network-security-config</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<br/>\n<h2>æŒ‰ç…§ç¬¬ä¸‰æ¡ä¿®æ”¹åï¼š</h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/d3e24/after-fix.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 64.55696202531645%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/svg+xml,%3csvg%20xmlns=\\&apos;http://www.w3.org/2000/svg\\&apos;%20width=\\&apos;400\\&apos;%20height=\\&apos;258\\&apos;%20viewBox=\\&apos;0%200%20400%20258\\&apos;%20preserveAspectRatio=\\&apos;none\\&apos;%3e%3cpath%20d=\\&apos;M237%2012c-6%205-6%202-7%2078a3271%203271%200%2001-2%2062v-3l-1%204-1%205v-6c0-6-2-7-2-1v3h-8c-7%200-8%200-8-2l-1-2-1%202c0%202-3%205-4%203l-2-2-1-4%201-3v3c0%204%202%204%202-1%200-3%200-4-2-4s-2%201-2%204v5l-1-5-1-4v4l1%206c1%201%202%202%201%203s-1%201-1-1v-2l-2%202c-1%202-3%202-7%202h-5l5-1%205-1h-6l-5%201h-1c-1-1-1-1-1%201-1%201-1%201-1-1v-2l-1%202-1-66c0-67%200-68-2-72-4-8-2-8-55-8-52%200-51%200-54%207a1180%201180%200%2000-4%20138c0-5-2-5-2%200-1%204-1%203-1-2v-7l-1%207c0%205-1%205-1%202%200-4%200-4-2-4l-3%201-26%201H0v104h401v-42l-1-63v-20h-8c-6%200-8%200-8%202s-16%202-16-1h-1l-1%202-1%204c0%203%200%203-1-2s-1-4-1%205v11h-9c-8%200-8-1-9-3V85c-1-59-1-64-3-68-3-7-2-7-55-7h-47l-3%202m-1%20124v87h103V49H236v87m-167%201v87h103V50H69v87M0%20206\\&apos;%20fill=\\&apos;%23d3d3d3\\&apos;%20fill-rule=\\&apos;evenodd\\&apos;/%3e%3c/svg%3e&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/e10e9/after-fix.webp 158w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/7600a/after-fix.webp 315w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/d869c/after-fix.webp 630w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/38d5d/after-fix.webp 945w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/4eefe/after-fix.webp 1260w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/f50bd/after-fix.webp 2862w\" sizes=\"(max-width: 630px) 100vw, 630px\" type=\"image/webp\">\n        <source srcset=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/ff44c/after-fix.jpg 158w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/a6688/after-fix.jpg 315w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/828fb/after-fix.jpg 630w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/0ede0/after-fix.jpg 945w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/3ac88/after-fix.jpg 1260w,\nhttps://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/d3e24/after-fix.jpg 2862w\" sizes=\"(max-width: 630px) 100vw, 630px\" type=\"image/jpeg\">\n        <img class=\"gatsby-resp-image-image\" src=\"https://cdn.jsdelivr.net/gh/muxinqi/blog@v-1610289478273/static/5b2db16bc4abc6cc40d6aab8ad188258/828fb/after-fix.jpg\" alt=\"after\" title=\"after\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n  </a>\n    </span>","frontmatter":{"title":"Androidé«˜ç‰ˆæœ¬httpè¯·æ±‚é”™è¯¯","date":"December 08, 2019","description":"ğŸ“• Android å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜"}},"previous":{"fields":{"slug":"/archives/getting-started-with-fitness/"},"frontmatter":{"title":"åœ¨ç–«æƒ…æœŸé—´æˆ‘åšæŒä¸‹æ¥çš„äº‹","slug":"getting-started-with-fitness"}},"next":{"fields":{"slug":"/archives/notes-of-getting-started-with-android-development/"},"frontmatter":{"title":"Androidé«˜ç‰ˆæœ¬æƒé™é—®é¢˜","slug":"notes-of-getting-started-with-android-development"}}},"pageContext":{"id":"704130af-9a9f-5254-a3fe-b04bb4ec4180","previousPostId":"732ca6ad-b9f8-511a-a041-53c25c670234","nextPostId":"632eaf3a-b6a8-572e-93e8-1200d97e2dc4"}},"staticQueryHashes":["2841359383","916993862"]}